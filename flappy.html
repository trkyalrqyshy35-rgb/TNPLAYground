<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<title>Flappy</title>
<style>
  body{font-family:Tahoma;background:#87CEEB;display:flex;flex-direction:column;align-items:center;padding:20px}
  canvas{background:#70c5ce;border-radius:8px}
  .controls{margin-top:10px}
  a{display:inline-block;margin-top:10px;padding:8px 14px;background:#333;color:#fff;text-decoration:none;border-radius:8px}
</style>
</head>
<body>
  <h1>ğŸ¦ Flappy</h1>
  <canvas id="c" width="400" height="520"></canvas>
  <div class="controls">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ù‚ÙØ²</div>
  <a href="index.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let bird = {x:80,y:260,vy:0};
let gravity = 0.6, jump = -10;
let pipes = [], frame=0, score=0, running=true;

function spawnPipe(){
  const gap=140;
  const topH = 50 + Math.random()*200;
  pipes.push({x:canvas.width, top:topH, gap:gap});
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // ground / bg
  ctx.fillStyle='#70c5ce';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  // bird
  ctx.fillStyle='yellow';
  ctx.beginPath(); ctx.arc(bird.x,bird.y,12,0,Math.PI*2); ctx.fill();
  // pipes
  ctx.fillStyle='green';
  pipes.forEach(p=>{
    ctx.fillRect(p.x,0,52,p.top);
    ctx.fillRect(p.x,p.top+p.gap,52,canvas.height);
  });
  // score
  ctx.fillStyle='#000'; ctx.font='20px Tahoma'; ctx.fillText('Score: '+score,10,30);
}

function update(){
  frame++;
  if(frame%90===0) spawnPipe();
  pipes.forEach(p=>p.x -= 2.6);
  bird.vy += gravity; bird.y += bird.vy;
  // collision and scoring
  pipes.forEach((p,i)=>{
    if(!p.passed && p.x + 52 < bird.x){ score++; p.passed=true; }
    // hit pipe?
    if(bird.x+12 > p.x && bird.x-12 < p.x+52){
      if(bird.y-12 < p.top || bird.y+12 > p.top + p.gap){ running=false; }
    }
  });
  // ground/sky collision
  if(bird.y > canvas.height || bird.y < 0) running=false;
  // remove offscreen
  pipes = pipes.filter(p=>p.x > -60);
}

function loop(){
  if(running){
    update();
    draw();
    requestAnimationFrame(loop);
  } else {
    ctx.fillStyle='rgba(0,0,0,0.5)'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='#fff'; ctx.font='28px Tahoma'; ctx.fillText('Game Over',120,240);
    ctx.fillText('Score: '+score,140,280);
  }
}

canvas.onclick = ()=>{ bird.vy = jump; if(!running) restart(); };
document.addEventListener('keydown', e=>{ if(e.code==='Space') { bird.vy = jump; if(!running) restart(); }});

function restart(){
  bird = {x:80,y:260,vy:0}; pipes=[]; frame=0; score=0; running=true; loop();
}

loop();
</script>
</body>
</html>
